<mujoco model="RH_JEARM">
  <compiler angle="radian"/>

  <asset>
    <mesh name="base_link" content_type="model/stl" file="base_link.STL"/>
    <mesh name="Link1" content_type="model/stl" file="Link1.STL"/>
    <mesh name="Link2" content_type="model/stl" file="Link2.STL"/>
    <mesh name="Link3" content_type="model/stl" file="Link3.STL"/>
    <mesh name="Link4" content_type="model/stl" file="Link4.STL"/>
    <mesh name="Link5" content_type="model/stl" file="Link5.STL"/>
    <mesh name="Link6" content_type="model/stl" file="Link6.STL"/>
    <mesh name="Link7" content_type="model/stl" file="Link7.STL"/>
  </asset>

  <worldbody>
    <body name="base_link">
      <geom type="mesh" name="geom_base_link" rgba="1 1 1 1" mesh="base_link"/>
    </body>
    <body name="Link1" pos="-0.0445 -0.2126 0.9008" quat="0.499998 0.5 -0.5 0.500002">
      <inertial pos="2.78361e-05 0.00322229 -0.00617631" quat="0.732877 0.68036 0.00140342 0.000443506" mass="0.159032" diaginertia="0.000247409 0.000216949 0.000181875"/>
      <joint name="joint1" pos="0 0 0" axis="0 0 1" range="-31.4 31.4" actuatorfrcrange="-100 100"/>
      <geom type="mesh" rgba="1 1 1 1" mesh="Link1"/>
      <body name="Link2" quat="0.707105 -0.707108 0 0">
        <inertial pos="1.35383e-07 -0.0256027 0.00229314" quat="0.999966 0.00820192 -1.63147e-06 2.5297e-06" mass="0.243794" diaginertia="0.000941741 0.000779447 0.000323558"/>
        <joint name="joint2" pos="0 0 0" axis="0 0 1" range="-31.4 31.4" actuatorfrcrange="-100 100"/>
        <geom type="mesh" rgba="1 1 1 1" mesh="Link2"/>
        <body name="Link3" pos="0 -0.2719 0" quat="0.707105 0.707108 0 0">
          <inertial pos="-0.00133919 0.000273595 -0.0780054" quat="0.703495 -0.0330008 -0.0310725 0.709253" mass="0.249548" diaginertia="0.000526989 0.00050154 0.000279316"/>
          <joint name="joint3" pos="0 0 0" axis="0 0 1" range="-31.4 31.4" actuatorfrcrange="-100 100"/>
          <geom type="mesh" rgba="0.819608 0.819608 0.819608 1" mesh="Link3"/>
          <body name="Link4" pos="-0.008 0 0" quat="0.707105 -0.707108 0 0">
            <inertial pos="0.00252976 -0.0159855 -0.00375255" quat="0.996322 0.0186219 0.00114127 0.0836354" mass="0.14036" diaginertia="0.000480237 0.000403553 0.000175055"/>
            <joint name="joint4" pos="0 0 0" axis="0 0 1" range="-31.4 31.4" actuatorfrcrange="-100 100"/>
            <geom type="mesh" rgba="1 1 1 1" mesh="Link4"/>
            <body name="Link5" pos="0.008 -0.2189 0" quat="0.707105 0.707108 0 0">
              <inertial pos="1.27921e-07 -0.00163211 -0.052024" quat="0.705422 0.048349 -0.048372 0.70548" mass="0.203459" diaginertia="0.000291932 0.000283283 0.000230367"/>
              <joint name="joint5" pos="0 0 0" axis="0 0 1" range="-31.4 31.4" actuatorfrcrange="-100 100"/>
              <geom type="mesh" rgba="0.819608 0.819608 0.819608 1" mesh="Link5"/>
              <body name="Link6" quat="0.707105 -0.707108 0 0">
                <inertial pos="-4.96393e-08 -0.048851 0.00148907" quat="0.903097 0.429436 2.91941e-06 4.28597e-06" mass="0.139512" diaginertia="0.000235436 0.000233328 0.000120505"/>
                <joint name="joint6" pos="0 0 0" axis="0 0 1" range="-31.4 31.4" actuatorfrcrange="-100 100"/>
                <geom type="mesh" rgba="0.819608 0.819608 0.819608 1" mesh="Link6"/>
                <body name="Link7" pos="0 -0.124 0" quat="0.707105 0.707108 0 0">
                  <inertial pos="0.0126522 0.000603555 0.0676118" quat="0.999614 -0.0253571 -0.0111831 -0.00170154" mass="0.369145" diaginertia="0.000447682 0.000337774 0.000186257"/>
                  <joint name="joint7" pos="0 0 0" axis="0 0 1" range="-31.4 31.4" actuatorfrcrange="-100 100"/>
                  <geom type="mesh" rgba="0.819608 0.819608 0.819608 1" mesh="Link7"/>
                </body>
              </body>
            </body>
          </body>
        </body>
      </body>
    </body>
  </worldbody>
  <contact>
    <!-- Exclude contact between adjacent links to avoid self-collisions during articulated motion -->
    <exclude body1="base_link" body2="Link1"/>
    <!-- Temporary: also exclude base with later links to avoid large initial penetrations during debugging -->

    <exclude body1="Link1" body2="Link2"/>
    <exclude body1="Link2" body2="Link3"/>

    <!-- Exclude all pairwise contacts among Link3..Link7 -->
    <exclude body1="Link3" body2="Link4"/>
    <exclude body1="Link3" body2="Link5"/>
    <exclude body1="Link3" body2="Link6"/>
    <exclude body1="Link3" body2="Link7"/>

    <exclude body1="Link4" body2="Link5"/>
    <exclude body1="Link4" body2="Link6"/>
    <exclude body1="Link4" body2="Link7"/>

    <exclude body1="Link5" body2="Link6"/>
    <exclude body1="Link5" body2="Link7"/>

    <exclude body1="Link6" body2="Link7"/>
  </contact>
  <actuator>
    <!-- Position control actuators: conservative kp and reduced forcerange for initial testing -->
    <position name="pos_joint1" joint="joint1" kp="200" ctrllimited="true"  user="1" ctrlrange="-2.96 2.96" forcelimited="true" forcerange="-100 100"/>
    <position name="pos_joint2" joint="joint2" kp="100" ctrllimited="true"  user="1" ctrlrange="-2.18 2.18" forcelimited="true" forcerange="-100 100"/>
    <position name="pos_joint3" joint="joint3" kp="50" ctrllimited="true"  user="1" ctrlrange="-2.96 2.96" forcelimited="true" forcerange="-100 100"/>
    <position name="pos_joint4" joint="joint4" kp="150" ctrllimited="true"  user="1" ctrlrange="-3.13 3.13" forcelimited="true" forcerange="-100 100"/>
    <position name="pos_joint5" joint="joint5" kp="50" ctrllimited="true"  user="1" ctrlrange="-2.96 2.96" forcelimited="true" forcerange="-100 100"/>
    <position name="pos_joint6" joint="joint6" kp="100" ctrllimited="true"  user="1" ctrlrange="-1.83 1.83" forcelimited="true" forcerange="-100 100"/>
    <position name="pos_joint7" joint="joint7" kp="50" ctrllimited="true"  user="1" ctrlrange="-1.83 1.83" forcelimited="true" forcerange="-100 100"/>
  </actuator>

  <!-- Add small joint damping to improve numerical stability -->
  <default>
    <joint damping="1000.0"/>
  </default>
</mujoco>
